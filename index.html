<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" type="image/x-icon" href="./img/icon/star.png">

	<title>VerseTime</title>
	<meta name="description" content="Check the local time at your favorite Star Citizen landing zone!">
	<meta property="og:description" content="Check the local time at your favorite Star Citizen landing zone!" />

	<meta property="og:image" content="img/icon/star.png.jpg">
	<meta property="og:image:alt" content="A white, four-spoked star" />

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;400;500;600;700&family=Roboto+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">

	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="css/location.css">
	<link rel="stylesheet" type="text/css" href="css/map.css">
	<link rel="stylesheet" type="text/css" href="css/atlas.css">
	<link rel="stylesheet" type="text/css" href="css/info.css">
</head>

<body>

	<section id="selected-location-card">

		<div id="selected-location-container">

			<div id="selected-location-bg-image"></div>

			<p class="selected-location-time" id="local-time"></p>

			<div id="BUTTON-open-settings">
				<p class="selected-location-label"><span id="location-name"></span>, <span id="location-body-type"></span> <span id="location-body-name"></span></p>
				<p class="selected-location-sublabel">local synodic time</p>
			</div>

			<div>
				<p id="chosen-time"></p>
				<p class="selected-location-sublabel" id="chosen-time-sublabel"></p>
			</div>

			<div class="riseset-container" id="next-rise-container">
				<div class="riseset-group">
					<p class="riseset-label">Next starrise</p>
					<p class="riseset-time-label" id="next-rise-countdown"></p>
				</div>
				<div class="riseset-group">
					<p class="riseset-label">Verse time</p>
					<p class="riseset-time-label" id="local-rise-time"></p>
				</div>
				<div class="riseset-group">
					<p class="riseset-label">Real Time</p>
					<p class="riseset-time-label"><span id="next-rise-time"></span></p>
				</div>
			</div>

			<div class="riseset-container" id="next-set-container">
				<div class="riseset-group">
					<p class="riseset-label">Next starset</p>
					<p class="riseset-time-label" id="next-set-countdown"></p>
				</div>
				<div class="riseset-group">
					<p class="riseset-label">Verse time</p>
					<p class="riseset-time-label" id="local-set-time"></p>
				</div>
				<div class="riseset-group">
					<p class="riseset-label">Real Time</p>
					<p class="riseset-time-label"><span id="next-set-time"></span></p>
				</div>
			</div>

		</div>
	</section>

	<div id="illumination-status"></div>




	<button id="BUTTON-toggle-credits-window" class="button">
		<img src="img/ui/question.png" />
		Info
	</button>

	<button id="BUTTON-share-location" class="button">
		<img src="img/ui/share.png" />
		Share
	</button>
	<div id="share-location-message">
		URL copied to clipboard
	</div>



	<section class="modal" id="modal-settings">
		<div id="settings-window">
			<button id="BUTTON-close-settings"></button>

			<div id="settings-change-time-container">
				<p id="change-time-label">Choose custom time (optional):</p>
				<input id="time-selection-input" type="datetime-local" name="time-selection-input">
			</div>

			<div id="settings-change-location-container">
				<input id="location-selection-input" type="text" name="location-selection-input" placeholder="Search locations..." spellcheck="false">
				<div id="available-locations-container">
					<div class="fade-top"></div>
					<div id="available-locations-list" class="hide-scroll"></div>
					<div class="fade-bottom"></div>
				</div>
			</div>
		</div>
	</section>



	<section class="modal" id="modal-credits">
		<div id="credits-window">
			<button id="BUTTON-close-credits" class="closeButton"></button>

			<section>
				<h2>Key bindings</h2>
				<div id="credits-keybinds">
					<kbd>/</kbd><p>Search locations</p>
					<kbd>Enter</kbd><p>Switch to first location in filtered list</p>
					<kbd>Up/Down</kbd><p>Select location in filtered list</p>
					<kbd>Esc</kbd><p>Close open windows</p>
				</div>
			</section>



			<section>
				<h2>Credits</h2>
				<div id="credits-credits">
					<div class="credit-group">
						<div>
							<img src="img/ui/database.png" />
							<h6>Data</h6>
						</div>
						<p><a href="https://docs.google.com/spreadsheets/d/1aGJ0_49ve1NKf0GvSteSt3-a4jSxnj2snHmTDwKTBgs" target="_blank" rel="noreferrer noopener">Murphy Exploration Group</a></p>
					</div>

					<div class="credit-group">
						<div>
							<img src="img/ui/map.png" />
							<h6>Maps</h6>
						</div>
						<p><a href="https://bitbucket.org/Cpt_BA/scexplorer_releases/downloads/" target="_blank" rel="noreferrer noopener">SCExplorer by Cpt_BA</a> and Graupunkt from VerseGuide</p>
					</div>

					<div class="credit-group">
						<div>
							<img src="img/ui/image.png" />
							<h6>Imagery</h6>
						</div>
						<p><a href="https://starcitizen.tools/Star_Citizen_Wiki" target="_blank" rel="noreferrer noopener">Star Citizen Wiki</a></p>
					</div>

					<div class="credit-group">
						<div>
							<img src="img/ui/github.png" />
							<h6>GitHub</h6>
						</div>
						<p><a href="https://github.com/dydrmr/VerseTime" target="_blank" rel="noreferrer noopener">Dydrmr original project page</a></p>
					</div>

					<div class="credit-group">
						<div>
							<img src="img/ui/heart.png" />
							<h6>Creator</h6>
						</div>
						<p>
							<a href="https://www.paypal.me/dydrm" target="_blank" rel="noreferrer noopener">DYDRM</a>
						</p>
					</div>
                    
					<br />

					<div>
						<p>
							<a href="https://robertsspaceindustries.com/" target="_blank">Sign up for Star Citizen</a> with referral code <b id="referral-code">STAR-SFLC-PRPQ</b> and get 5,000 in-game credits!
						</p>

						<script>
							document.getElementById('referral-code').addEventListener('click', () => {
								navigator.clipboard.writeText('STAR-SFLC-PRPQ');
							});
						</script>
					</div>
					

				</div>
			</section>

		</div>
	</section>



	<section class="modal" id="modal-map">
		<div id="map-window">

			<button id="BUTTON-close-map" class="closeButton"></button>

			<div id="map-body-name"></div>

			<div id="map-bodyinfo-window" class="map-window">
				<div class="info-group-table">
					<p class="info-group-label">Type</p><p class="info-group-data"><span id="map-info-type">XXXX</span></p>
					<p class="info-group-label">System</p><p class="info-group-data"><span id="map-info-system">XXXX</span></p>
					<p class="info-group-label">Orbits</p><p class="info-group-data"><span id="map-info-orbits">XXXX</span></p>
					<p class="info-group-label">Orbital distance</p><p class="info-group-data"><span id="map-info-orbitdistance">X,XXX</span> km</p>
					<p class="info-group-label">Natural satellites</p><p class="info-group-data"><span id="map-info-naturalsatellites">X</span></p>
					<p class="info-group-label">Radius</p><p class="info-group-data"><span id="map-info-radius">X,XXX</span> km</p>
					<p class="info-group-label">Circumference</p><p class="info-group-data"><span id="map-info-circumference">X,XXX</span> km</p>
					<p class="info-group-label">Rotation rate</p><p class="info-group-data"><span id="map-info-rotationrate">X.X</span></p>
					<p class="info-group-label">Length of day</p><p class="info-group-data"><span id="map-info-lengthofday">XX:XX:XX</span></p>
				</div>
			</div>

			<div id="map-locationinfo-window" class="map-window">
				<div class="info-group-table">
					<p class="info-group-label">Name</p><p class="info-group-data"><span id="map-info-locationname"></span></p>
					<p class="info-group-label">Type</p><p class="info-group-data"><span id="map-info-locationtype"></span></p>
					<p class="info-group-label">Elevation</p><p class="info-group-data"><span id="map-info-elevation"></span> m</p>
					<p class="info-group-label">Phase</p><p class="info-group-data"><span id="map-info-phase"></span></p>
					<p class="info-group-label">Next starrise</p><p class="info-group-data"><span id="map-info-nextstarrise"></span></p>
					<p class="info-group-label">Next starset</p><p class="info-group-data"><span id="map-info-nextstarset"></span></p>
				</div>
			</div>

			<div id="map-settings-window" class="map-window">
				<h3>Map settings</h3>
				<div id="map-settings-container">
					<p>Opacity</p>
					<input type="range" min="0" max="100" value="20" class="slider" style="width:80px;" id="map-settings-planet-transparency">

					<p>Times</p>
					<input type="checkbox" id="map-settings-show-times" checked>

					<p>Shadow</p>
					<input type="checkbox" id="map-settings-show-terminator" checked>

					<p>OMs</p>
					<input type="checkbox" id="map-settings-show-orbitalmarkers" checked>

					<p>Grid</p>
					<input type="checkbox" id="map-settings-show-grid" checked>

					<p>Stars</p>
					<input type="checkbox" id="map-settings-show-starfield" checked>
				</div>
			</div>

		</div>
	</section>



    <section class="modal" id="modal-atlas">
        <div id="atlas-loading-screen">
            <div>
                <p>Loading</p>
				<div class="la-ball-newton-cradle">
					<div></div>
					<div></div>
					<div></div>
					<div></div>
				</div>
                <progress id="atlas-loading-bar" value="0" max="100"> </progress>
            </div>
        </div>

        <button id="BUTTON-close-atlas" class="closeButton"></button>


        <div id="atlas-container">

            <div id="atlas-debug-info" style="display:none;">
                <p class="atlas-debug-header">DEBUG DATA</p>
                <p class="atlas-debug-header">CAMERA</p>
                <p>X <span id="atlas-debug-x"></span></p>
                <p>Y <span id="atlas-debug-y"></span></p>
                <p>Z <span id="atlas-debug-z"></span></p>
                <p>Zoom: <span id="atlas-zoom"></span></p>
				<p>Min : <span id="atlas-min-zoom"></span></p>
				<p>Scale: <span id="atlas-scale"></span><br />= <span id="atlas-scale-units"></span></p>
				<p>Rotate speed: <span id="atlas-rotate-speed"></span></p>
                <br />
                <p class="atlas-debug-header">FOCUS</p>
                <p>System: <span id="atlas-focus-system"></span></p>
                <p>Object: <span id="atlas-focus-object"></span></p>
                <p>Class: <span id="atlas-focus-object-class"></span></p>
                <p>Radius: <span id="atlas-focus-object-radius"></span></p>
            </div>

            <div id="atlas-sidebar" class="map-window">
                <h2>System Overview</h2>
                <ul id="atlas-treelist" class="treelist">
                </ul>
            </div>

			<div id="atlas-hierarchy">
				SYSTEM ▸ BODY ▸ CHILDBODY ▸ LOCATION
			</div>

            <div id="atlas-hoverinfo" class="atlas-ui-window"></div>

            <div id="atlas-settings-window" class="map-window">
                <h3>Settings</h3>
                <div id="atlas-settings-container">
                    <p>Lollipops</p>
                    <input type="checkbox" id="atlas-settings-show-lollipops" checked>

                    <p>Wormholes</p>
                    <input type="checkbox" id="atlas-settings-show-wormholes" checked>

                    <p>Affliation</p>
                    <input type="checkbox" id="atlas-settings-show-affiliation" checked>

                    <p>Polar Grid</p>
                    <input type="checkbox" id="atlas-settings-show-grid" checked>

                    <p>Starfield</p>
                    <input type="checkbox" id="atlas-settings-show-starfield" checked>
                </div>
            </div>

        </div>
    </section>



	<section id="detailed-info">
		<div class="detailed-info-group">
			<h3>GENERAL</h3>
			<div class="info-group-table">
				<p class="info-group-label">HASH</p><p id="db-hash" class="info-group-data"></p>
			</div>
		</div>

		<div class="detailed-info-group">
			<h3>TIME</h3>
			<div class="info-group-table">
				<p class="info-group-label">UNIX</p><p id="db-unix-time" class="info-group-data"></p>
				<p class="info-group-label">CHOSEN</p><p id="db-chosen-time" class="info-group-data"></p>
				<p class="info-group-label">GMT</p><p id="db-gmt-time" class="info-group-data"></p>
				<p class="info-group-label">VERSE</p><p id="db-universe-time" class="info-group-data"></p>
			</div>
		</div>

		<div class="detailed-info-group">
			<h3>Body: <span id="body-name">[BODY NAME]</span></h3>
            <div class="info-group-table">
                <p class="info-group-label">Type</p><p class="info-group-data"><span id="body-type"></span></p>
                <p class="info-group-label">System</p><p class="info-group-data"><span id="body-system"></span></p>
                <p class="info-group-label">Orbits</p><p class="info-group-data"><span id="body-parent-name"></span></p>
                <p class="info-group-label">Radius</p><p class="info-group-data"><span id="body-radius"></span> km</p>
                <p class="info-group-label">Time to spin 360&deg;</p><p class="info-group-data"><span id="day-length"></span> sec</p>
                <p class="info-group-label">Real length of day</p><p class="info-group-data">= <span id="day-length-readable"></span></p>
                <p class="info-group-label">Real length of 1 hour</p><p class="info-group-data">= <span id="hour-length-readable"></span></p>
                <p class="info-group-label">Star declination</p><p class="info-group-data"><span id="declination"></span>&deg;</p>
                <p class="info-group-label">Current cycle</p><p id="current-cycle" class="info-group-data"></p>
                <p class="info-group-label">Hour angle</p><p class="info-group-data"><span id="hour-angle"></span>&deg;</p>
                <p class="info-group-label">Stationary noon longitude</p><p class="info-group-data"><span id="meridian"></span>&deg;</p>
                <p class="info-group-label">Rotating noon longitude</p><p class="info-group-data"><span id="noon-longitude"></span>&deg;</p>
            </div>
		</div>

		<div class="detailed-info-group">
			<h3>Location: <span id="db-local-name">[LOCATION NAME]</span></h3>
			<div class="info-group-table">
				<p class="info-group-label">Latitude</p><p class="info-group-data"><span id="latitude"></span>&deg;</p>
				<p class="info-group-label">Longitude</p><p class="info-group-data"><span id="longitude"></span>&deg;</p>
				<p class="info-group-label">Longitude-360</p><p class="info-group-data"><span id="longitude-360"></span>&deg;</p>
				<p class="info-group-label">Elevation</p><p class="info-group-data"><span id="elevation"></span> meters</p>
				<p class="info-group-label"></p><p class="info-group-data">= <span id="elevation-degrees"></span>&deg;</p>
				<p class="info-group-label">Local time</p><p class="info-group-data"><span id="db-local-time"></span></p>
				<p class="info-group-label">Phase</p><p class="info-group-data"><span id="db-illumination-status"></span></p>
				<p class="info-group-label">Length of daylight</p><p class="info-group-data"><span id="length-of-daylight"></span></p>
				<p class="info-group-label">Length of night</p><p class="info-group-data"><span id="length-of-night"></span></p>
				<p class="info-group-label">Local starrise time</p><p class="info-group-data"><span id="starrise-time"></span></p>
				<p class="info-group-label">Local starset time</p><p class="info-group-data"><span id="starset-time"></span></p>
				<p class="info-group-label">Next starrise</p><p class="info-group-data"><span id="next-starrise-countdown"></span> d</p>
				<p class="info-group-label">Next starset</p><p class="info-group-data"><span id="next-starset-countdown"></span> d</p>
				<p class="info-group-label">Hour angle</p><p class="info-group-data"><span id="hour-angle-location"></span>&deg;</p>
				<p class="info-group-label">Star azimuth</p><p class="info-group-data"><span id="star-azimuth"></span>&deg;</p>
				<p class="info-group-label">Star rise/set angle</p><p class="info-group-data"><span id="sunriseset-angle"></span>&deg; from N</p>
				<p class="info-group-label">Star altitude</p><p class="info-group-data"><span id="star-altitude"></span></p>
				<p class="info-group-label">Star max altitude</p><p class="info-group-data"><span id="max-star-altitude"></span></p>
			</div>
		</div>

		<div style="display:none">
			<h3>Next Star Rise:</h3>
			<p>Value: <span id="db-next-starrise"></span> sec (= <span id="db-next-starrise-countdown"></span>)</p>
			<p>Date: <span id="db-next-starrise-date"></span></p>
			<br>
			<h3>Next Noon:</h3>
			<p>Value: <span id="next-noon"></span> sec (= <span id="next-noon-countdown"></span>)</p>
			<p>Date: <span id="next-noon-date"></span></p>
			<br>
			<h3>Next Star Set:</h3>
			<p>Value: <span id="db-next-starset"></span> sec (= <span id="db-next-starset-countdown"></span>)</p>
			<p>Date: <span id="db-next-starset-date"></span></p>
		</div>
	</section>

</body>

<script type="importmap">
	{
	  "imports": {
		"three": "https://unpkg.com/three@0.157.0/build/three.module.js",
		"three/addons/": "https://unpkg.com/three@0.157.0/examples/jsm/"
	  }
	}
</script>

<script src="main.js" type="module"></script>
</html>